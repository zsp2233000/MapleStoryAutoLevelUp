# ====== Default Configuration ======
# DO NOT directly modify the following parameters
# Put your own setting in config_edit_me.yaml instead.
# --------------------------------------

bot:
  # ğŸ” Bot Settings
  mode: "normal"        # Options: "normal" "aux" "patrol"
  attack: "directional" # Options: "aoe_skill" "directional"
  map: "" # Please refer to config/config_data.yaml

key:
  # ğŸ® Keyboard Mapping
  # Adjust the keys to match your in-game keybindings.
  #
  # Examples:
  #   - "q":      Presses key Q
  #   - "space":  Space bar
  #   - "1":      Number key 1
  #   - "ctrl":   Control key
  #   - "alt":    Alt key
  #   - "shift":  Shift key
  aoe_skill: "q"            # ğŸ’¥ AoE skill (e.g., Cleric's heal or Mage's lightning)
  directional_attack: "w"   # âš”ï¸ Basic directional attack (e.g., Magic Claw or throwing stars)
  teleport: "e"             # ğŸŒ€ Teleport skill. Set to "" if not usable
  jump: "space"             # ğŸ¦˜ Jump key
  add_hp: "1"               # â¤ï¸ Use HP potion. Set to "" to disable auto-healing
  add_mp: "2"               # ğŸ’§ Use MP potion. Set to "" to disable auto-mana
  return_home: "home"       # ğŸ” Key to use return home scroll.
  party: "p"                # âŒ¨ï¸ Party window shortcut

buff_skill:
  # ğŸ’« Buff Skill
  # Automatically apply buff skills when the cooldowns are ready.
  # Buff skills are like: Mage's Magic Guard, Cleric's Angel's Blessing, Thief's Speed Boost
  # âš ï¸ Note: If your have a pet to apply buff for you, you can ignore this.
  keys: []                # âŒ¨ï¸ List of keys to cast each buff skill (e.g., ["a", "s"])
  cooldown: []            # â±ï¸ Cooldown time (in seconds), matches the order of `keys`
  action_cooldown: 1      # ğŸ•’ Delay (in seconds) after buffing before continuing actions

directional_attack:
  # ğŸ—¡ï¸ Directional Attack
  # Directional attacks are basic attack/skills that only attack player left or right.
  # For examples, Mageâ€™s Magic Claw, Thiefâ€™s dart throw, or even a snail shell toss are all directional attack
  range_x: 350               # â†”ï¸ Horizontal attack range (in pixels)
  range_y: 70                # â†•ï¸ Vertical attack range (in pixels)
  cooldown: 0.9              # â±ï¸ Time between attacks (in seconds)
  character_turn_delay: 0.02 # ğŸ”„ Delay after turning before attacking (in seconds)

aoe_skill:
  # ğŸ’¥ AoE Skill
  # AoE (Area of Effect) skills hit enemies no matter which direction the chrarcter is facing.
  # For examples: Clericâ€™s Heal, Holy light, Mageâ€™s Lightning Bolt are all AOE skills 
  range_x: 400               # â†”ï¸ Horizontal skill range (in pixels)
  range_y: 170               # â†•ï¸ Vertical skill range (in pixels)
  cooldown: 0.05             # TODO: Currently just a filler

health_monitor:
  # â¤ï¸ Health Monitor
  # Automatically drinks HP/MP potions when health or mana drops below a threshold.
  # âš ï¸ If your pet already handles auto-healing, you can disable this.
  enable: True             # âœ… Enable or disable health monitor
  force_heal: False        # ğŸ›¡ï¸ Heal first â€” stop attacking until HP is restored
  add_hp_percent: 50       # â¤ï¸ Drink HP potion when HP drops below this ratio [0.0 ~ 1.0]
  add_mp_percent: 50       # ğŸ’™ Drink MP potion when MP drops below this ratio [0.0 ~ 1.0]
  add_hp_cooldown: 0.5     # ğŸ•’ Seconds to wait between HP potions, prevent potion spam
  add_mp_cooldown: 0.5     # ğŸ•’ Seconds to wait between MP potions, prevent potion spam
  fps_limit: 20            # ğŸš¥ Loop rate for the health monitor thread
  return_home_if_no_potion: False      # âœ… Use homing scroll when potion is used up
  return_home_watch_dog_timeout: 3     # ğŸ•’ Duration to detect HP is lower than "add_hp_percent"

teleport:
  # ğŸŒ€ Mage Teleport
  # This feature lets Mages use teleport to move faster while walking.
  # âš ï¸ Still experimental! Enabling it may cause unexpected issues.
  is_use_teleport_to_walk: False  # âœ… Use teleport while walking (may cause inaccurate pathing)
  cooldown: 1                     # â±ï¸ Teleport skill cooldown (in seconds)

edge_teleport:
  # ğŸ§™â€â™‚ï¸ Edge Teleport
  # When your character approaches the edge of a platform, teleport to the platform center.
  # If your character isn't a Mage, it will perform a jump instead.
  enable: True                 # âœ… Enable or disable this feature
  trigger_box_width: 20        # â†”ï¸ Width of the edge detection box (in pixels)
  trigger_box_height: 10       # â†•ï¸ Height of the edge detection box (in pixels)
  color_code: [255, 127, 127]  # ğŸ¨ RGB color code to represent platform edge

party_red_bar:
  # â¤ï¸ Party Red Bar Detection
  # Detects your character's party red on on the game window to estimate player location.
  # This feature will only turn on when nametag.enable == False
  lower_red: [0, 60, 60]   # â¤ï¸ HSV, darker red of party health bar
  upper_red: [0, 100, 100] # â¤ï¸ HSV, brighter red of party health bar
  offset: [20, 66]         # ğŸ¯ Offset from the top-left corner of the party red bar to the character center
  create_party_button_cn_thres: 0.04   # ğŸ“ threshold for create party button matching
  create_party_button_eng_thres: 0.04 # ğŸ“ threshold for create party button matching

nametag:
  # ğŸ·ï¸ NameTag Recognition
  # âš ï¸ This feature is deprecated, using party red bar is way better than detecting nametag.
  # Detects your character's nametag on the game window to estimate player location.
  enable: False   # âœ… Only switch back to 'True' when party red bar detection doesn't work for you
  name: "example" # Load nametag/<name>.png as nametag template
  mode: "grayscale"  # ğŸ§ª Comparison mode for matching the nametag, Options: "grayscale" "white_mask" "histogram_eq"
  offset: [-50, 30]  # ğŸ¯ Pixel offset from the top-left corner of the matched nametag to the character center 
  diff_thres: 0.2     # ğŸ“ Matching threshold, [0.0 ~ 1.0] â€” lower = more tolerant, higher = stricter

  global_diff_thres: 0.2  # ğŸ§  Global detection fallback
  # If the diff is higher than this threshold, do a full-frame search.
  # If lower, search near the last known location to save time.
  # Set to 0.0 to disable this optimization

  split_width: 30  # âœ‚ï¸ pixels width of each vertical split
  # To avoid occlusion from ladders or background objects,
  # the nametag will be split vertically and matched in smaller parts.

character:
  # ğŸ§ Character
  # Your character's size in pixels.
  # âš ï¸ Only used if monster_detect.mode is set to "template_free" â€”
  #    you can ignore this if using other detection modes.
  width: 100      # â†”ï¸ Character width (in pixels)
  height: 150     # â†•ï¸ Character height (in pixels)

monster_detect:
  # ğŸŒ Monster Detection
  # Automatically detect monsters around your character.
  # Detection mode determines the method used to find monsters.
  # Modes ranked from most to least computational cost:
  #   - "color"         (most accurate but slowest)
  #   - "grayscale"     (slow)
  #   - "contour_only"  (fast, contour-based, a good balance)
  #   - "template_free" (lightest and fastest, but likely to have many wrong detection)
  # ğŸ’¡ Feel free to test different modes to find what works best for your setup.
  mode: "contour_only"         # ğŸ§  Options: "color" "grayscale" "contour_only" "template_free"
  diff_thres: 0.8              # ğŸ“ Diff threshold for template matching, [0.0 ~ 1.0] Lower = stricter match
  search_box_margin: 50        # â• Additional margin(in pixels) around the attack box for monster searching
  contour_blur: 5              # ğŸŒ«ï¸ Gaussian blur kernel size used for contour smoothing (in "contour_only" mode).
  with_enemy_hp_bar: True      # â¤ï¸ Enable smarter detection using enemy HP bars.
  hp_bar_color: [71, 204, 64]  # ğŸ’š Enemy HP bar color (in BGR format)
  max_mob_area_trigger: 1500   # ğŸ“ How much does the mob need to overlap with attack range to be considered as a target

channel_change:
  # ğŸ” Auto change channel when other player detected
  # "true": Change channel once other player is detected
  # "pixel": Change channel once other player move set pixels in other_player_move_pixel
  enable: False                # âœ…
  mode: "pixel"                # ğŸ§  Options: "true" "pixel"
  other_player_move_thres: 10  # ğŸ“ only work in "pixel" mode

scheduled_channel_switching:
  # Schduel for channel swithcing
  enable: False            # Enable this feature or not
  interval_seconds: 1800   # Switch channel for every <interval_seconds> second

ui_coords:
  # ğŸ§­ UI Coordinate
  # Buttons and menu cooridinate in game window
  # Expect all these coordinate is on orignal window size (get it from frame screenshot)
  ui_y_start: 610                       # ğŸ“ UI y start
  "menu": [1140, 730]                   # ğŸ“ Menu coordinate on game window UI
  "channel": [1140, 666]                # ğŸ“ Channel button coordinate
  "random_channel": [877, 161]          # ğŸ“ Random channel button in the channel selection menu
  "random_channel_confirm": [585, 420]  # ğŸ“ Confirm button after clicking channel switch
  "select_character": [888, 275]        # ğŸ“ Select character button during login
  login_button_thres: 0.05              # ğŸ“ threshold to detect a login button on game window
  login_button_top_left: [838, 317]     # ğŸ“ top left corner of login button search ragne
  login_button_bottom_right: [940, 373] # ğŸ“ bottom right corner of login button search ragne

route:
  # ğŸ§­ Route Following
  # The character follows a pre-defined route image (route*.png) using color-coded commands.
  search_range: 10            # ğŸ” Radius (in pixels) to search for the nearest route color around the player
  jump_down_cooldown: 3.0     # â±ï¸ Cooldown (in seconds) for 'jump down' action to prevent continuous descent

  # ğŸ¨ Color-coded(RGB) actions for route navigation
  # "<left-right command, up-down command, action>"
  color_code:
    "255,0,0": "left none none"         # ğŸ”´ Red
    "0,0,255": "right none none"        # ğŸ”µ Blue
    "255,127,0": "left none jump"       # ğŸŸ  Orange
    "0,255,255": "right none jump"      # ğŸŸ¦ Cyan
    "127,255,0": "none down jump"       # ğŸ’š Lime
    "255,0,255": "none none jump"       # ğŸ’œ Magenta
    "0,255,127": "stop stop stop"       # ğŸŸ¢ Light green
    "255,255,0": "none none goal"       # ğŸŸ¨ Yellow
    "255,0,127": "none up teleport"     # ğŸŒ¸ Pink
    "127,0,255": "none down teleport"   # ğŸŸª Purple
    "0,127,0": "left none teleport"     # ğŸŸ© Dark green
    "139,69,19": "right none teleport"  # ğŸŸ« Brown

  # ğŸ¨ Color-coded(RGB) actions for up and down
  color_code_up_down:
    "127,127,127": "none up none"       # âšª Gray
    "255,255,127": "none down none"     # ğŸŸ¡ Light yellow

watchdog:
  # ğŸ¶ Watchdog
  # This feature monitors your character's movement.
  # If the player stays in the same spot for too long, the watchdog will "bark"
  # and trigger a random action (defined in `color_code`) to help break the stuck state.
  # The other feature is last attack watch dog. It check if the player doesn't attack for too long.
  # If so, consider the player is stuck and perform recovery action 
  range: 10            # ğŸ¥¶ Movement threshold (in pixels). If the player moves less than this, it's considered stuck.
  timeout: 10          # â±ï¸ Time limit (in seconds). If the player stays still for this long, a random action is triggered.
  last_attack_timeout: 1200 # â³ Maximum time (in seconds) to not perform attack action
  last_attack_timeout_action: "change_channel" # ğŸ§  Options: "go_home" "change_channel"

rune_warning_cn:
  # âš ï¸ Rune Warning Detection(Chinese)
  # Detects the "Please remove the rune" message on screen.
  # When this warning appears, the bot will pause combat and start searching for the rune instead.
  top_left: [513, 137]        # ğŸŸ¦ Top-left corner of the rune warning message (img_frame coord)
  bottom_right: [768, 177]    # ğŸŸ¥ Bottom-right corner of the rune warning (img_frame coord)
  diff_thres: 0.1             # ğŸ“ Matching threshold [0.0 ~ 1.0], higher = stricter match

rune_warning_eng:
  # âš ï¸ Rune Warning Detection(English)
  # Detects the "Please remove the rune" message on screen.
  # When this warning appears, the bot will pause combat and start searching for the rune instead.
  top_left: [432, 145]        # ğŸŸ¦ Top-left corner of the rune warning message (img_frame coord)
  bottom_right: [864, 171]    # ğŸŸ¥ Bottom-right corner of the rune warning (img_frame coord)
  diff_thres: 0.1             # ğŸ“ Matching threshold [0.0 ~ 1.0], higher = stricter match

rune_enable_msg_cn:
  # âš ï¸ Rune Enable Message(Chinese)
  # Detects the "Runes has been create" message on screen
  # When it appears, the bot will start detecting runes
  top_left: [559, 57]     # ğŸ“ top left coordinate of rune enable msg (img_frame coord)
  bottom_right: [733, 87] # ğŸ“ right bottom coordinate of rune enable msg (img_frame coord)
  diff_thres: 0.1          # ğŸ“ Match threshold [0.0 ~ 1.0], higher = stricter match

rune_enable_msg_eng:
  # âš ï¸ Rune Enable Message(English)
  # Detects the "Runes has been create" message on screen
  # When it appears, the bot will start detecting runes
  top_left: [460, 60]     # ğŸ“ top left coordinate of rune enable msg (img_frame coord)
  bottom_right: [702, 83] # ğŸ“ right bottom coordinate of rune enable msg (img_frame coord)
  diff_thres: 0.1          # ğŸ“ Match threshold [0.0 ~ 1.0], higher = stricter match

rune_detect:
  # âœ¨ Rune Detection Box
  # This detects the glowing purple rune on screen.
  # The box determines how big of a region to search in the game screen.
  box_width: 350              # â†”ï¸ Width of the detection region
  box_height: 150             # â†•ï¸ Height of the detection region
  diff_thres: 0.2             # ğŸ“ Match threshold [0.0 ~ 1.0], higher = stricter match
  debug     : False           # ğŸ” Draw rune boxes or not

rune_find:
  # ğŸ§­ Rune-Finding Behavior
  near_rune_duration: 10           # ğŸ•’ Duration to interact with rune when a positive detection occurs
  rune_trigger_cooldown: 0.3       # ğŸ•’ Cooldown for 'up' key rune trigger
  rune_trigger_distance_x: 20      # â†”ï¸ only press 'up' when player distance(in pixel) to the rune is close enough.
  rune_trigger_distance_y: 200     # â†•ï¸ only press 'up' when player distance(in pixel) to the rune is close enough.

rune_solver:
  # ğŸ§© Rune Mini-Game Solver
  # When a rune is successfully triggered, a 4-arrow window game appears.
  # The rune_solver will automatically detect and match the best arrow pattern,
  # then press the correct direction key to solve the mini-game.
  arrow_box_size: 80           # ğŸ“ Arrow icon size in pixels (e.g., 75x75 box)
  arrow_box_interval: 170      # â†”ï¸ Distance between arrows (horizontal spacing in pixels)
  arrow_box_coord: [355, 296]  # ğŸ¯ Top-left coordinate of the first (leftmost) arrow (img_frame coord)
  arrow_box_diff_thres: 0.2    # ğŸ“ Match threshold [0.0 ~ 1.0]
                               #     â†ª If the match score of the first arrow is lower than this,
                               #     the solver assumes the rune mini-game has started
  arrow_low_hsv: [340, 40, 40]    # ğŸ”´
  arrow_high_hsv: [110, 100, 100] # ğŸ”´
  arrow_highlight_low_hsv: [340, 85, 85]    # ğŸ”´
  arrow_highlight_high_hsv: [110, 100, 100] # ğŸ”´

minimap:
  # ğŸ—ºï¸ Mini-Map
  # The minimap appears in the top-left corner of the game window.
  # It is used to estimate the playerâ€™s current location in the world.
  player_color: [136, 255, 255]   # ğŸŸ¡ BGR value of the yellow player dot on the minimap
  other_player_color: [0, 0, 255] # ğŸ”´ BGR value of the red other player dot on the minimap
  debug_window_upscale: 4         # ğŸ” Zoom factor for the route debug image (for visualization only)
  offset: [0, 0]                  # ğŸ“ Don't set this unless playing on global server

patrol:
  # ğŸš¶â€â™‚ï¸ Patrol Mode
  # In this mode, the player will walk back and forth and attack periodically.
  # It doesn't rely on monster detection or a minimap â€” just pure action!
  range: [0.2, 0.8]               # â†”ï¸ [0.0 ~ 1.0] Patrol boundaries (relative to screen width)
                                  #     - 0.0 = Left edge of the game window
                                  #     - 1.0 = Right edge
                                  # The player will turn back once reaching these bounds.
  turn_point_thres: 10            # ğŸ” Number of consecutive frames required to confirm a turn point
  patrol_attack_interval: 2.5     # ğŸ•’ Time in seconds between each attack while patrolling

route_recoder:
  # ğŸ¥ Route Recorder
  # The route recorder is a standalone tool that helps generate `map.png` and `route*.png`.
  # It records the player's movement and actions, then saves them as a route map image.
  blob_cooldown: 0.7        # â±ï¸ Cooldown in seconds between recording actions like 'jump' or 'teleport'
                            #     These actions are marked as a "blob" on the route map
  map_padding: 30           # ğŸ–¤ Padding (in pixels) added as margin around the edge of the map

game_window:
  # ğŸªŸ Game Window
  # Basic information about the game window setup
  title: "MapleStory Worlds"   # ğŸ® Game window title (used to detect the correct window)
  size: [693, 1282]            # ğŸ“ Game window size [height, width] in pixels, (Excluded title bar size)
  ratio_tolerance: 0.08        # ğŸ“ Game window 16:9 tolerance
  title_bar_height: 59         # ğŸ“ Title Bar Height (Note it's before window resize)

email:
  # ğŸ“© Email
  # Send email to notify user
  # This feature is currently work in prograss
  enable: False                                   # âœ…
  sender_email: "maplestoryautolevelup@gmail.com" # Your don't have to change this
  sender_password: "lvxfdhthvvrcuojj"             # Your don't have to change this
  receiver_email: "luckyyu910645@gmailcom"        # ğŸ“© Put your email here

system:
  # âš™ï¸ System Settings
  # Controls performance and behavior of core system threads.
  fps_limit_main: 10                # ğŸš¥ Main loop FPS â€“ controls how fast the main thread runs
  fps_limit_keyboard_controller: 30 # ğŸš¥ Keyboard controller thread FPS
  fps_limit_window_capturor: 15     # ğŸš¥ Window capture thread FPS
  fps_limit_route_recorder: 10      # ğŸš¥ Route recorder FPS
  fps_limit_auto_dice_roller: 1     # ğŸš¥ Auto rice roller FPS
  key_debounce_interval: 1          # â±ï¸ Cooldown (in seconds) between function key presses (e.g., F1, F2...)
  server: "TW"                      # âš™ï¸ Options: "TW" "NA"
  language: "cn"                    # âš™ï¸ Options: "eng" "cn"

profiler:
  # âš™ï¸ Profiler
  # For FPS/performance debugging
  # When the FPS is lower than 5, please use profiler to find which code block is costing more time 
  enable: False       # âœ… To print the profiler result or not
  print_frequency: 30 # Print profiler result for every 30 frames
